{% set identifier = (action.id or action.name or action.class_name) | default('ActionNode', true) %}
{% set class_name = action.class_name | default(identifier | to_pascal_case) %}
{% set base_class = action.base_class | default('SyncActionNode') %}

#pragma once

#include <behaviortree_cpp/action_node.h>
#include <string>

namespace {{ args.package.name | regex_replace('[^A-Za-z0-9]', '_') }}::bt::actions {

class {{ class_name }} final : public BT::{{ base_class }} {
public:
  explicit {{ class_name }}(const std::string &name, const BT::NodeConfiguration &config);

  static BT::PortsList providedPorts();

{% if base_class == 'StatefulActionNode' %}
  BT::NodeStatus onStart() override;
  BT::NodeStatus onRunning() override;
  void onHalted() override;
{% elif base_class == 'AsyncActionNode' %}
  BT::NodeStatus tick() override;
  void halt() override;
{% else %}
  BT::NodeStatus tick() override;
{% endif %}
};

}  // namespace {{ args.package.name | regex_replace('[^A-Za-z0-9]', '_') }}::bt::actions

